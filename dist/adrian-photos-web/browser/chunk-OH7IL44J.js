import{a as yt,b as bt,c as O,d as wt,f as St,g as Et,h as Tt,i as Lt,j as Dt,k as It,l as E}from"./chunk-UQQMPI4Y.js";import{a as Ot,b as vt}from"./chunk-ZYSQTO5S.js";import{a as X}from"./chunk-YUITIWFT.js";import{a as nt,b as rt,c as lt}from"./chunk-BDZSJOAO.js";import{a as et}from"./chunk-YMFN6ZCL.js";import{a as st,b as dt,c as pt,d as gt,e as ft,f as _t,g as ht,h as Ct,i as ut,j as Pt,k as Mt,l as xt}from"./chunk-6HPAY4DL.js";import"./chunk-5GM4WQFN.js";import{a as ct,b as mt}from"./chunk-7VV2ICZJ.js";import{a as at}from"./chunk-6DQ7DRGO.js";import{b as ot,i as it}from"./chunk-YRW4GBFK.js";import{a as Y,c as Z,h as tt}from"./chunk-AJVMF73T.js";import"./chunk-NLFWUB3B.js";import"./chunk-4GZB6F7U.js";import"./chunk-HBOHSLSL.js";import"./chunk-PMF3TIP7.js";import"./chunk-KMGLOWHO.js";import{Fb as $,Ka as m,La as n,Ma as o,Na as P,Ob as H,Pb as N,Ra as f,Sa as _,T as M,U as x,Ua as y,Wa as h,Wb as Q,Xb as b,Ya as C,ab as L,bb as D,bd as G,cb as I,dd as w,ed as S,fc as W,fd as K,gd as J,ha as T,ia as c,ib as B,jc as q,kb as i,lb as k,mb as u,nb as F,oa as p,ob as z,pb as R,qb as A,sa as v,tb as j,vb as U,xa as d,yb as V}from"./chunk-Z7QZQF3E.js";var kt=()=>[10,25,50,100];function Ft(e,l){if(e&1&&(n(0,"mat-option",11),i(1),o()),e&2){let t=l.$implicit;m("value",t.id),c(),u(" ",t.name," ")}}function zt(e,l){e&1&&(n(0,"div",18)(1,"p"),i(2,"Loading photos..."),o()())}function Rt(e,l){if(e&1){let t=y();n(0,"div",19)(1,"mat-icon"),i(2,"photo_library"),o(),n(3,"h3"),i(4,"No Photos Found"),o(),n(5,"p"),i(6,"Upload your first photo to get started"),o(),n(7,"button",5),h("click",function(){M(t);let a=C();return x(a.navigateToUpload())}),n(8,"mat-icon"),i(9,"add_photo_alternate"),o(),i(10," Upload Photo "),o()()}}function At(e,l){e&1&&(n(0,"th",33),i(1,"Photo"),o())}function jt(e,l){if(e&1&&(n(0,"td",34)(1,"div",35),P(2,"img",36),o()()),e&2){let t=l.$implicit,r=C(2);c(2),m("src",r.getPhotoUrl(t),T)("alt",t.title)}}function Ut(e,l){e&1&&(n(0,"th",33),i(1,"Title"),o())}function Vt(e,l){if(e&1&&(n(0,"td",34)(1,"div",37)(2,"div",38),i(3),o(),n(4,"div",39),i(5),U(6,"slice"),o()()()),e&2){let t=l.$implicit;c(3),k(t.title),c(2),F("",V(6,3,t.description,0,60),"",t.description.length>60?"...":"")}}function $t(e,l){e&1&&(n(0,"th",33),i(1,"Categories"),o())}function Ht(e,l){if(e&1&&(n(0,"mat-chip"),i(1),o()),e&2){let t=l.$implicit;c(),u(" ",t," ")}}function Nt(e,l){if(e&1&&(n(0,"td",34)(1,"div",40),d(2,Ht,2,1,"mat-chip",41),o()()),e&2){let t=l.$implicit;c(2),m("ngForOf",t.categoryNames)}}function Qt(e,l){e&1&&(n(0,"th",33),i(1,"Base Price"),o())}function Wt(e,l){if(e&1&&(n(0,"td",34),i(1),o()),e&2){let t=l.$implicit,r=C(2);c(),u(" ",r.formatPrice(t.price)," ")}}function qt(e,l){e&1&&(n(0,"th",33),i(1,"Status"),o())}function Gt(e,l){if(e&1&&(n(0,"td",34)(1,"mat-chip"),i(2),o()()),e&2){let t=l.$implicit;c(),B("active-chip",t.isActive)("inactive-chip",!t.isActive),c(),u(" ",t.isActive?"Active":"Inactive"," ")}}function Kt(e,l){e&1&&(n(0,"th",33),i(1,"Actions"),o())}function Jt(e,l){if(e&1){let t=y();n(0,"td",34)(1,"div",42)(2,"button",43),h("click",function(){let a=M(t).$implicit,s=C(2);return x(s.editPhoto(a))}),n(3,"mat-icon"),i(4,"edit"),o()(),n(5,"button",44),h("click",function(){let a=M(t).$implicit,s=C(2);return x(s.deletePhoto(a))}),n(6,"mat-icon"),i(7,"delete"),o()()()()}}function Xt(e,l){e&1&&P(0,"tr",45)}function Yt(e,l){e&1&&P(0,"tr",46)}function Zt(e,l){if(e&1&&(n(0,"div",20)(1,"table",21),f(2,22),d(3,At,2,0,"th",23)(4,jt,3,2,"td",24),_(),f(5,25),d(6,Ut,2,0,"th",23)(7,Vt,7,7,"td",24),_(),f(8,26),d(9,$t,2,0,"th",23)(10,Nt,3,1,"td",24),_(),f(11,27),d(12,Qt,2,0,"th",23)(13,Wt,2,1,"td",24),_(),f(14,28),d(15,qt,2,0,"th",23)(16,Gt,3,5,"td",24),_(),f(17,29),d(18,Kt,2,0,"th",23)(19,Jt,8,0,"td",24),_(),d(20,Xt,1,0,"tr",30)(21,Yt,1,0,"tr",31),o(),P(22,"mat-paginator",32),o()),e&2){let t=C();c(),m("dataSource",t.dataSource),c(19),m("matHeaderRowDef",t.displayedColumns),c(),m("matRowDefColumns",t.displayedColumns),c(),m("pageSizeOptions",j(4,kt))}}var De=(()=>{class e{photoService;categoryService;snackBar;dialog;router;cdr;displayedColumns=["thumbnail","title","category","price","status","actions"];dataSource=new xt;categories=[];selectedCategoryId=null;isLoading=!1;paginator;constructor(t,r,a,s,g,Bt){this.photoService=t,this.categoryService=r,this.snackBar=a,this.dialog=s,this.router=g,this.cdr=Bt}ngOnInit(){this.loadCategories(),this.loadPhotos()}ngAfterViewInit(){this.paginator&&(this.dataSource.paginator=this.paginator)}loadCategories(){this.categoryService.getCategories().subscribe({next:t=>{this.categories=t},error:t=>{console.error("Error loading categories:",t)}})}loadPhotos(){this.isLoading=!0;let t=this.selectedCategoryId||void 0;this.photoService.getPhotos(t).subscribe({next:r=>{this.dataSource.data=r.photos,this.isLoading=!1,this.cdr.detectChanges()},error:r=>{this.snackBar.open("Failed to load photos","Close",{duration:3e3}),console.error("Error loading photos:",r),this.isLoading=!1}})}onCategoryFilterChange(t){this.selectedCategoryId=t,this.loadPhotos()}getPhotoUrl(t){return this.photoService.getPhotoUrl(t.r2Key)}getCategoryName(t){return this.categories.find(a=>a.id===t)?.name||"Unknown"}formatPrice(t){return`$${(t/100).toFixed(2)}`}navigateToUpload(){this.router.navigate(["/admin/photos/upload"])}editPhoto(t){this.router.navigate(["/admin/photos/edit",t.id])}deletePhoto(t){this.dialog.open(te,{data:{photoTitle:t.title}}).afterClosed().subscribe(a=>{a&&(this.isLoading=!0,this.photoService.deletePhoto(t.id).subscribe({next:()=>{this.snackBar.open("Photo deleted successfully","Close",{duration:3e3}),this.loadPhotos()},error:s=>{this.snackBar.open(s.message||"Failed to delete photo","Close",{duration:5e3}),this.isLoading=!1}}))})}refreshList(){this.loadPhotos()}static \u0275fac=function(r){return new(r||e)(p(et),p(X),p(ct),p(Et),p(W),p($))};static \u0275cmp=v({type:e,selectors:[["app-photo-list"]],viewQuery:function(r,a){if(r&1&&L(O,5),r&2){let s;D(s=I())&&(a.paginator=s.first)}},decls:31,vars:6,consts:[[1,"admin-page"],[1,"admin-page-header"],[1,"header-content"],[1,"subtitle"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"page-content"],[1,"filter-card"],[1,"filters"],["appearance","outline"],[3,"valueChange","selectionChange","value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Refresh",3,"click"],[1,"table-card"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading-state"],[1,"empty-state"],[1,"table-container"],["mat-table","",1,"photos-table",3,"dataSource"],["matColumnDef","thumbnail"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","category"],["matColumnDef","price"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"thumbnail"],["loading","lazy",3,"src","alt"],[1,"title-cell"],[1,"photo-title"],[1,"photo-description"],[1,"category-chips"],[4,"ngFor","ngForOf"],[1,"actions"],["mat-icon-button","","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),i(4,"Photos"),o(),n(5,"p",3),i(6,"Manage your photography portfolio"),o()(),n(7,"div",4)(8,"button",5),h("click",function(){return a.navigateToUpload()}),n(9,"mat-icon"),i(10,"add_photo_alternate"),o(),i(11," Upload Photo "),o()()(),n(12,"div",6)(13,"mat-card",7)(14,"mat-card-content")(15,"div",8)(16,"mat-form-field",9)(17,"mat-label"),i(18,"Filter by Category"),o(),n(19,"mat-select",10),A("valueChange",function(g){return R(a.selectedCategoryId,g)||(a.selectedCategoryId=g),g}),h("selectionChange",function(g){return a.onCategoryFilterChange(g.value)}),n(20,"mat-option",11),i(21,"All Categories"),o(),d(22,Ft,2,2,"mat-option",12),o()(),n(23,"button",13),h("click",function(){return a.refreshList()}),n(24,"mat-icon"),i(25,"refresh"),o()()()()(),n(26,"mat-card",14)(27,"mat-card-content"),d(28,zt,3,0,"div",15)(29,Rt,11,0,"div",16)(30,Zt,23,5,"div",17),o()()()()),r&2&&(c(19),z("value",a.selectedCategoryId),c(),m("value",null),c(2),m("ngForOf",a.categories),c(6),m("ngIf",a.isLoading),c(),m("ngIf",!a.isLoading&&a.dataSource.data.length===0),c(),m("ngIf",!a.isLoading&&a.dataSource.data.length>0))},dependencies:[b,H,N,q,tt,Y,Z,Mt,st,pt,ht,gt,dt,Ct,ft,_t,ut,Pt,wt,O,S,w,G,J,K,vt,Ot,at,it,ot,lt,rt,nt,mt,E,bt,yt,Q],styles:[".admin-page[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0}.admin-page-header[_ngcontent-%COMP%]{margin-bottom:32px;display:flex;align-items:flex-start;justify-content:space-between;gap:16px}.admin-page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.admin-page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Prata,serif;font-size:36px;color:#616e76;margin:0 0 8px}.admin-page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:16px;color:#999;margin:0}.admin-page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex-shrink:0}.admin-page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:800}.admin-page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:24px!important}.stat-card[_ngcontent-%COMP%]     mat-spinner circle{stroke:#e2bf55!important}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:12px;display:flex;align-items:center;justify-content:center}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#fff}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{flex:1}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:14px;color:#999;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:800;font-size:32px;color:#616e76;line-height:1;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .stat-change[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:12px;font-weight:600}.stat-card[_ngcontent-%COMP%]   .stat-change.positive[_ngcontent-%COMP%]{color:#4caf50}.stat-card[_ngcontent-%COMP%]   .stat-change.neutral[_ngcontent-%COMP%]{color:#999}.stat-card[_ngcontent-%COMP%]   .stat-change.warning[_ngcontent-%COMP%]{color:#ff9800}@media(max-width:768px){.admin-page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.admin-page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.admin-page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;flex-direction:column}.admin-page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.filter-card[_ngcontent-%COMP%]{margin-bottom:24px}.filter-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}.filter-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.filter-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;max-width:300px;font-family:Barlow,sans-serif}.table-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.loading-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:18px;color:#999}.empty-state[_ngcontent-%COMP%]{padding:80px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#ddd;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Prata,serif;font-size:24px;color:#616e76;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:16px;color:#999;margin-bottom:24px}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:800;background-color:#e2bf55!important;color:#616e76!important}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.photos-table[_ngcontent-%COMP%]{width:100%;font-family:Barlow,sans-serif}.photos-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:800;color:#616e76;background:#f5f5f5}.photos-table[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:80px;height:60px;overflow:hidden;border-radius:4px;margin:10px}.photos-table[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.photos-table[_ngcontent-%COMP%]   .title-cell[_ngcontent-%COMP%]   .photo-title[_ngcontent-%COMP%]{font-weight:600;color:#616e76;margin-bottom:4px}.photos-table[_ngcontent-%COMP%]   .title-cell[_ngcontent-%COMP%]   .photo-description[_ngcontent-%COMP%]{font-size:12px;color:#999}.photos-table[_ngcontent-%COMP%]   .category-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.photos-table[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:12px}.photos-table[_ngcontent-%COMP%]   mat-chip.active-chip[_ngcontent-%COMP%]{background:#4caf50!important;color:#fff!important}.photos-table[_ngcontent-%COMP%]   mat-chip.inactive-chip[_ngcontent-%COMP%]{background:#999!important;color:#fff!important}.photos-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:4px}.photos-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}mat-paginator[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;font-family:Barlow,sans-serif}@media(max-width:768px){.filters[_ngcontent-%COMP%]{flex-direction:column}.filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{max-width:100%}.photos-table[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:60px;height:45px;margin:10px}.photos-table[_ngcontent-%COMP%]   .photo-description[_ngcontent-%COMP%]{display:none}}"]})}return e})(),te=(()=>{class e{data;constructor(t){this.data=t}static \u0275fac=function(r){return new(r||e)(p(St))};static \u0275cmp=v({type:e,selectors:[["confirm-delete-dialog"]],decls:12,vars:3,consts:[["mat-dialog-title",""],["align","end"],["mat-button","",3,"mat-dialog-close"],["mat-raised-button","","color","warn",3,"mat-dialog-close"]],template:function(r,a){r&1&&(n(0,"h2",0),i(1,"Confirm Delete"),o(),n(2,"mat-dialog-content")(3,"p"),i(4),o(),n(5,"p"),i(6,"This action cannot be undone."),o()(),n(7,"mat-dialog-actions",1)(8,"button",2),i(9,"Cancel"),o(),n(10,"button",3),i(11,"Delete"),o()()),r&2&&(c(4),u('Are you sure you want to delete "',a.data.photoTitle,'"?'),c(4),m("mat-dialog-close",!1),c(2),m("mat-dialog-close",!0))},dependencies:[b,E,Tt,Lt,It,Dt,S,w],styles:["h2[_ngcontent-%COMP%]{font-family:Prata,serif;color:#616e76}p[_ngcontent-%COMP%]{font-family:Barlow,sans-serif}button[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:800}"]})}return e})();export{te as ConfirmDeleteDialog,De as PhotoListComponent};
