import{a as F}from"./chunk-WM75V3NH.js";import{a as Y}from"./chunk-6KL2AY5X.js";import"./chunk-ZAQJCETW.js";import{a as A,b as N}from"./chunk-2ID4XIQB.js";import{a as D,c as V,g as U,h as R}from"./chunk-PDGJ2ZUN.js";import{$b as I,$c as j,Db as v,Ia as g,Ja as n,Ka as o,La as C,Mb as b,Nb as w,R as h,S as _,Sa as f,Ua as y,Ub as S,Wa as l,Yc as z,_c as L,ad as T,bd as B,cc as k,fa as M,fc as E,ga as a,ib as r,jb as p,kb as x,lb as O,ma as s,qa as P,sb as u,va as m}from"./chunk-KLI6WXR5.js";var G=i=>["/photos",i];function K(i,d){i&1&&(n(0,"div",4),C(1,"mat-spinner"),n(2,"p"),r(3,"Loading category..."),o()())}function Q(i,d){if(i&1&&(n(0,"div",5)(1,"mat-icon"),r(2,"error_outline"),o(),n(3,"h2"),r(4),o(),n(5,"button",6)(6,"mat-icon"),r(7,"arrow_back"),o(),r(8," Back to Gallery "),o()()),i&2){let t=l();a(4),p(t.error)}}function $(i,d){if(i&1){let t=f();n(0,"mat-card",18)(1,"div",19),C(2,"img",20),n(3,"div",21)(4,"mat-icon"),r(5,"visibility"),o(),n(6,"span"),r(7,"View Details"),o()()(),n(8,"mat-card-content")(9,"h3"),r(10),o(),n(11,"p",22),r(12),o(),n(13,"div",23)(14,"span",24),r(15),o(),n(16,"button",25),y("click",function(c){return h(t),c.preventDefault(),_(c.stopPropagation())}),n(17,"mat-icon"),r(18,"add_shopping_cart"),o(),r(19," Quick Add "),o()()()()}if(i&2){let t=d.$implicit,e=l(3);g("routerLink",u(6,G,t.id)),a(2),g("src",e.getPhotoUrl(t.r2Key),M)("alt",t.title),a(8),p(t.title),a(2),p(t.description),a(3),x("$",(t.price/100).toFixed(2))}}function H(i,d){if(i&1&&(n(0,"div",16),m(1,$,20,8,"mat-card",17),o()),i&2){let t=l(2);a(),g("ngForOf",t.photos)}}function J(i,d){i&1&&(n(0,"div",26)(1,"mat-icon"),r(2,"photo_library"),o(),n(3,"h2"),r(4,"No photos in this category yet"),o(),n(5,"p"),r(6,"Check back soon for new additions!"),o(),n(7,"button",6),r(8," Browse All Categories "),o()())}function W(i,d){if(i&1){let t=f();n(0,"div",27)(1,"button",28),y("click",function(){h(t);let c=l(2);return _(c.loadMore())}),r(2," Load More Photos "),o()()}}function X(i,d){if(i&1&&(n(0,"div",7)(1,"div",8)(2,"button",9)(3,"mat-icon"),r(4,"arrow_back"),o()(),n(5,"div",10)(6,"h1"),r(7),o(),n(8,"p",11),r(9),o(),n(10,"p",12),r(11),o()()(),m(12,H,2,1,"div",13)(13,J,9,0,"div",14)(14,W,3,0,"div",15),o()),i&2){let t=l();a(7),p(t.category.name),a(2),p(t.category.description),a(2),O("",t.pagination.total," ",t.pagination.total===1?"photo":"photos"),a(),g("ngIf",t.photos.length>0),a(),g("ngIf",t.photos.length===0),a(),g("ngIf",t.pagination.page<t.pagination.totalPages)}}var ht=(()=>{class i{route;categoryService;photoService;cdr;category=null;photos=[];loading=!0;error=null;pagination={page:1,limit:20,total:0,totalPages:0};constructor(t,e,c,q){this.route=t,this.categoryService=e,this.photoService=c,this.cdr=q}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");console.log("Category component initialized with ID:",t),t?this.loadCategoryByIdOrSlug(t):(this.error="Category ID not found",this.loading=!1)}loadCategoryByIdOrSlug(t){console.log("Loading category:",t),this.categoryService.getCategoryById(t).subscribe({next:e=>{console.log("Category loaded:",e),this.category=e,this.loading=!1,this.cdr.detectChanges(),this.loadPhotos(e.id)},error:e=>{console.error("Failed to load category:",e),this.error="Category not found",this.loading=!1,this.cdr.detectChanges()}})}loadCategory(t){console.log("Loading category:",t),this.categoryService.getCategoryById(t).subscribe({next:e=>{console.log("Category loaded:",e),this.category=e,this.loading=!1,console.log("Loading set to false, loading:",this.loading,"error:",this.error,"category:",this.category),this.cdr.detectChanges(),console.log("Change detection triggered")},error:e=>{console.error("Error loading category:",e),this.error="Failed to load category: "+(e.message||"Unknown error"),this.loading=!1,this.cdr.detectChanges()}})}loadPhotos(t){console.log("Loading photos for category:",t),this.photoService.getPhotos(t,this.pagination.page,this.pagination.limit).subscribe({next:e=>{console.log("Photos loaded:",e),this.photos=e.photos,this.pagination=e.pagination,this.cdr.detectChanges(),console.log("Photos change detection triggered, photos count:",this.photos.length)},error:e=>{console.error("Error loading photos:",e),this.cdr.detectChanges()}})}getPhotoUrl(t){return this.photoService.getPhotoUrl(t)}loadMore(){this.pagination.page<this.pagination.totalPages&&this.category&&(this.pagination.page++,this.loadPhotos(this.category.id))}static \u0275fac=function(e){return new(e||i)(s(I),s(F),s(Y),s(v))};static \u0275cmp=P({type:i,selectors:[["app-category"]],decls:4,vars:3,consts:[[1,"category-container"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","category-content",4,"ngIf"],[1,"loading-container"],[1,"error-container"],["mat-raised-button","","color","primary","routerLink","/gallery"],[1,"category-content"],[1,"category-header"],["mat-icon-button","","routerLink","/gallery",1,"back-button"],[1,"header-content"],[1,"category-description"],[1,"photo-count"],["class","photos-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","load-more-container",4,"ngIf"],[1,"photos-grid"],["class","photo-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"photo-card",3,"routerLink"],[1,"photo-image-wrapper"],["mat-card-image","",3,"src","alt"],[1,"photo-overlay"],[1,"photo-description"],[1,"photo-footer"],[1,"price"],["mat-button","","color","accent",1,"quick-add-btn",3,"click"],[1,"empty-state"],[1,"load-more-container"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,c){e&1&&(n(0,"div",0),m(1,K,4,0,"div",1)(2,Q,9,1,"div",2)(3,X,15,7,"div",3),o()),e&2&&(a(),g("ngIf",c.loading),a(),g("ngIf",c.error&&!c.loading),a(),g("ngIf",!c.loading&&!c.error&&c.category))},dependencies:[S,b,w,E,k,R,D,V,U,j,L,z,B,T,N,A],styles:[".category-container[_ngcontent-%COMP%]{min-height:calc(100vh - 64px);padding:2rem;max-width:1400px;margin:0 auto}@media(max-width:768px){.category-container[_ngcontent-%COMP%]{padding:1rem}}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;gap:1.5rem}.loading-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#666}.loading-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#666}.category-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.category-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;margin-bottom:3rem;padding-bottom:2rem;border-bottom:2px solid #e0e0e0}.category-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-top:.5rem}.category-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.category-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:2.5rem;color:#333}@media(max-width:768px){.category-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}.category-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .category-description[_ngcontent-%COMP%]{font-size:1.125rem;color:#666;margin:0 0 .5rem;line-height:1.6}.category-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .photo-count[_ngcontent-%COMP%]{font-size:.875rem;color:#999;margin:0}.photos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem;margin-bottom:3rem}@media(max-width:768px){.photos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}}.photo-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease,box-shadow .2s ease,border-color .2s ease;height:100%;display:flex;flex-direction:column;border:2px solid transparent}.photo-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #00000026;border-color:#e2bf55}.photo-card[_ngcontent-%COMP%]:hover   .photo-overlay[_ngcontent-%COMP%]{opacity:1}.photo-card[_ngcontent-%COMP%]   .photo-image-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:#f5f5f5;aspect-ratio:4/3}.photo-card[_ngcontent-%COMP%]   .photo-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.photo-card[_ngcontent-%COMP%]   .photo-image-wrapper[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.photo-card[_ngcontent-%COMP%]   .photo-image-wrapper[_ngcontent-%COMP%]   .photo-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease;color:#fff}.photo-card[_ngcontent-%COMP%]   .photo-image-wrapper[_ngcontent-%COMP%]   .photo-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:.5rem}.photo-card[_ngcontent-%COMP%]   .photo-image-wrapper[_ngcontent-%COMP%]   .photo-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.photo-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:1rem!important}.photo-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.25rem;color:#333}.photo-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .photo-description[_ngcontent-%COMP%]{flex:1;margin:0 0 1rem;color:#666;font-size:.875rem;line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.photo-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .photo-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-top:.5rem;border-top:1px solid #e0e0e0}.photo-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .photo-footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#e2bf55}.photo-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .photo-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.25rem}.photo-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .photo-footer[_ngcontent-%COMP%]   .quick-add-btn[_ngcontent-%COMP%]{color:#e2bf55}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:96px;width:96px;height:96px;color:#ccc;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;color:#666}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 2rem;color:#999}.load-more-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem 0}.load-more-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:200px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})}return i})();export{ht as CategoryComponent};
