import{a as $,b as K}from"./chunk-2ID4XIQB.js";import{d as ge,e as fe}from"./chunk-K2GLQ4GK.js";import{a as ue,b as pe}from"./chunk-JEGDFQ3A.js";import{a as ce}from"./chunk-2DB5WL3Y.js";import{a as Q,b as X,c as Y,d as ee,e as te,h as re}from"./chunk-Z7H67QOJ.js";import{a as V,b as G,c as Z,d as H,f as J,h as W}from"./chunk-PDGJ2ZUN.js";import{a as D}from"./chunk-R66GKMT3.js";import"./chunk-RYSAEJIT.js";import"./chunk-4TETIUZD.js";import{d as ne,f as M,h as ie,i as ae,m as oe,o as le,p as se,t as me,v as de}from"./chunk-UYB4FCO3.js";import"./chunk-52PBV3KU.js";import{$b as B,$c as L,Ba as E,Ca as b,Ea as S,Ia as p,Ja as a,Ka as r,La as c,Ua as x,Ub as N,Wa as F,Yc as R,_c as j,ad as T,bc as z,bd as U,cc as A,ga as o,gb as g,hb as k,ib as n,jb as m,kb as q,ma as d,qa as y,sb as I}from"./chunk-KLI6WXR5.js";var he=/[A-Z]/,_e=/[a-z]/,we=/[0-9]/,ve=l=>({returnUrl:l});function Ce(l,O){if(l&1&&(a(0,"mat-hint"),n(1),r()),l&2){let t=F();k("password-strength-"+t.getPasswordStrength()),o(),q(" Strength: ",t.getPasswordStrength()," ")}}function Me(l,O){l&1&&c(0,"mat-spinner",19)}function Pe(l,O){l&1&&n(0," Create Account ")}var Ge=(()=>{class l{fb;authService;router;route;snackBar;registerForm;loading=!1;hidePassword=!0;returnUrl="/";constructor(t,i,e,s,u){this.fb=t,this.authService=i,this.router=e,this.route=s,this.snackBar=u,this.registerForm=this.fb.group({email:["",[M.required,M.email]],password:["",[M.required,this.passwordValidator]],firstName:[""],lastName:[""]})}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/",this.authService.isAuthenticatedSync()&&this.router.navigate([this.returnUrl])}passwordValidator(t){let i=t.value;if(!i)return null;let e={};return i.length<8&&(e.minLength="Password must be at least 8 characters"),/[A-Z]/.test(i)||(e.uppercase="Password must contain at least one uppercase letter"),/[a-z]/.test(i)||(e.lowercase="Password must contain at least one lowercase letter"),/[0-9]/.test(i)||(e.number="Password must contain at least one number"),Object.keys(e).length>0?e:null}onSubmit(){if(this.registerForm.invalid)return;this.loading=!0;let t=this.registerForm.value;this.authService.register(t).subscribe({next:i=>{this.snackBar.open(`Welcome, ${i.firstName||i.email}!`,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),this.router.navigate([this.returnUrl])},error:i=>{this.loading=!1,this.snackBar.open(i.message||"Registration failed","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}getEmailError(){let t=this.registerForm.get("email");return t?.hasError("required")?"Email is required":t?.hasError("email")?"Please enter a valid email":""}getPasswordError(){let t=this.registerForm.get("password");return t?.hasError("required")?"Password is required":t?.hasError("minLength")?t.errors?.minLength:t?.hasError("uppercase")?t.errors?.uppercase:t?.hasError("lowercase")?t.errors?.lowercase:t?.hasError("number")?t.errors?.number:""}getPasswordStrength(){let t=this.registerForm.get("password")?.value;if(!t)return"";let i=0;return t.length>=8&&i++,/[A-Z]/.test(t)&&i++,/[a-z]/.test(t)&&i++,/[0-9]/.test(t)&&i++,/[^A-Za-z0-9]/.test(t)&&i++,i<=2?"weak":i<=3?"medium":"strong"}static \u0275fac=function(i){return new(i||l)(d(me),d(D),d(z),d(B),d(ge))};static \u0275cmp=y({type:l,selectors:[["app-register"]],decls:68,vars:24,consts:[[1,"register-container"],[1,"register-card"],[3,"ngSubmit","formGroup"],[1,"name-fields"],["appearance","outline",1,"half-width"],["matInput","","type","text","formControlName","firstName","placeholder","John","autocomplete","given-name"],["matPrefix",""],["matInput","","type","text","formControlName","lastName","placeholder","Doe","autocomplete","family-name"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","you@example.com","autocomplete","email"],["matInput","","formControlName","password","placeholder","Create a strong password","autocomplete","new-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[3,"class"],[1,"password-requirements"],[1,"requirement-title"],[1,"requirements-list"],[1,"requirement"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",1,"register-button",3,"disabled"],["diameter","20"],[1,"login-link"],["routerLink","/login",3,"queryParams"]],template:function(i,e){if(i&1&&(a(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),n(4,"Create Account"),r(),a(5,"mat-card-subtitle"),n(6,"Join Adrian Photos today"),r()(),a(7,"mat-card-content")(8,"form",2),x("ngSubmit",function(){return e.onSubmit()}),a(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),n(12,"First Name"),r(),c(13,"input",5),a(14,"mat-icon",6),n(15,"person"),r()(),a(16,"mat-form-field",4)(17,"mat-label"),n(18,"Last Name"),r(),c(19,"input",7),r()(),a(20,"mat-form-field",8)(21,"mat-label"),n(22,"Email"),r(),c(23,"input",9),a(24,"mat-icon",6),n(25,"email"),r(),a(26,"mat-error"),n(27),r()(),a(28,"mat-form-field",8)(29,"mat-label"),n(30,"Password"),r(),c(31,"input",10),a(32,"mat-icon",6),n(33,"lock"),r(),a(34,"button",11),x("click",function(){return e.hidePassword=!e.hidePassword}),a(35,"mat-icon"),n(36),r()(),a(37,"mat-error"),n(38),r(),b(39,Ce,2,3,"mat-hint",12),r(),a(40,"div",13)(41,"div",14),n(42,"Password must contain:"),r(),a(43,"div",15)(44,"div",16)(45,"mat-icon"),n(46),r(),n(47," At least 8 characters "),r(),a(48,"div",16)(49,"mat-icon"),n(50),r(),n(51," One uppercase letter "),r(),a(52,"div",16)(53,"mat-icon"),n(54),r(),n(55," One lowercase letter "),r(),a(56,"div",16)(57,"mat-icon"),n(58),r(),n(59," One number "),r()()(),a(60,"div",17)(61,"button",18),b(62,Me,1,0,"mat-spinner",19)(63,Pe,1,0),r()()(),a(64,"div",20),n(65," Already have an account? "),a(66,"a",21),n(67," Sign in "),r()()()()()),i&2){let s,u,P,f,h,_,w,v,C;o(8),p("formGroup",e.registerForm),o(19),m(e.getEmailError()),o(4),p("type",e.hidePassword?"password":"text"),o(3),E("aria-label","Hide password"),o(2),m(e.hidePassword?"visibility_off":"visibility"),o(2),m(e.getPasswordError()),o(),S((s=e.registerForm.get("password"))!=null&&s.value&&!((s=e.registerForm.get("password"))!=null&&s.hasError("required"))?39:-1),o(5),g("met",((u=e.registerForm.get("password"))==null||u.value==null?null:u.value.length)>=8),o(2),m(((P=e.registerForm.get("password"))==null||P.value==null?null:P.value.length)>=8?"check_circle":"radio_button_unchecked"),o(2),g("met",((f=e.registerForm.get("password"))==null?null:f.value)&&he.test((f=e.registerForm.get("password"))==null?null:f.value)),o(2),m((h=e.registerForm.get("password"))!=null&&h.value&&he.test((h=e.registerForm.get("password"))==null?null:h.value)?"check_circle":"radio_button_unchecked"),o(2),g("met",((_=e.registerForm.get("password"))==null?null:_.value)&&_e.test((_=e.registerForm.get("password"))==null?null:_.value)),o(2),m((w=e.registerForm.get("password"))!=null&&w.value&&_e.test((w=e.registerForm.get("password"))==null?null:w.value)?"check_circle":"radio_button_unchecked"),o(2),g("met",((v=e.registerForm.get("password"))==null?null:v.value)&&we.test((v=e.registerForm.get("password"))==null?null:v.value)),o(2),m((C=e.registerForm.get("password"))!=null&&C.value&&we.test((C=e.registerForm.get("password"))==null?null:C.value)?"check_circle":"radio_button_unchecked"),o(3),p("disabled",e.registerForm.invalid||e.loading),o(),S(e.loading?62:63),o(4),p("queryParams",I(22,ve,e.returnUrl))}},dependencies:[N,de,oe,ne,ie,ae,se,le,A,W,V,Z,J,H,G,ce,re,Q,Y,X,ee,te,pe,ue,L,j,R,K,$,U,T,fe],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 64px);padding:2rem 1rem;background:linear-gradient(135deg,#f5f7fa,#e8eef3)}.register-card[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:2rem;box-shadow:0 8px 24px #616e7626}mat-card-header[_ngcontent-%COMP%]{margin-bottom:2rem}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Prata,serif;font-size:2rem;font-weight:400;margin-bottom:.5rem;color:#616e76}mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:1rem;opacity:.7;color:#616e76}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.name-fields[_ngcontent-%COMP%]{display:flex;gap:1rem}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{flex:1}.password-requirements[_ngcontent-%COMP%]{margin-top:-.5rem;margin-bottom:1rem;padding:1rem;background:#616e760d;border-radius:4px}.password-requirements[_ngcontent-%COMP%]   .requirement-title[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:.875rem;font-weight:600;margin-bottom:.5rem;opacity:.7;color:#616e76}.password-requirements[_ngcontent-%COMP%]   .requirements-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.password-requirements[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;display:flex;align-items:center;gap:.5rem;font-size:.875rem;opacity:.6;transition:all .2s}.password-requirements[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.125rem;width:1.125rem;height:1.125rem}.password-requirements[_ngcontent-%COMP%]   .requirement.met[_ngcontent-%COMP%]{opacity:1;color:#e2bf55}.password-strength-weak[_ngcontent-%COMP%]{color:#d32f2f!important}.password-strength-medium[_ngcontent-%COMP%]{color:#f57c00!important}.password-strength-strong[_ngcontent-%COMP%]{color:#e2bf55!important}.actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-direction:column;gap:1rem}.register-button[_ngcontent-%COMP%]{width:100%;height:48px;font-family:Barlow,sans-serif;font-size:1rem;font-weight:800;background-color:#616e76!important}.register-button[_ngcontent-%COMP%]:hover{background-color:#505a61!important}.register-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.login-link[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;text-align:center;margin-top:2rem;padding-top:1.5rem;border-top:1px solid rgba(97,110,118,.2)}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#616e76;text-decoration:none;font-weight:600}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e2bf55;text-decoration:underline}@media(max-width:600px){.register-container[_ngcontent-%COMP%]{padding:1rem .5rem}.register-card[_ngcontent-%COMP%]{padding:1.5rem}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem}.name-fields[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.half-width[_ngcontent-%COMP%]{width:100%}}"]})}return l})();export{Ge as RegisterComponent};
