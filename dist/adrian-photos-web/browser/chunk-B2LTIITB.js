import{a as Ot,b as bt,c as v,d as St,f as wt,g as Et,h as Tt,i as Lt,j as Dt,k as It,l as E}from"./chunk-FXMEZZDY.js";import{a as vt,b as yt}from"./chunk-77JGQV4U.js";import{a as X}from"./chunk-WM75V3NH.js";import{a as et}from"./chunk-6KL2AY5X.js";import{a as st,b as dt,c as pt,d as gt,e as ft,f as _t,g as ht,h as Ct,i as ut,j as Pt,k as Mt,l as xt}from"./chunk-UDRDCPUO.js";import"./chunk-ZAQJCETW.js";import{a as nt,b as rt,c as lt,d as ct,e as mt}from"./chunk-K2GLQ4GK.js";import{a as at}from"./chunk-2DB5WL3Y.js";import{a as ot,h as it}from"./chunk-Z7H67QOJ.js";import{a as Y,c as Z,h as tt}from"./chunk-PDGJ2ZUN.js";import"./chunk-RYSAEJIT.js";import"./chunk-4TETIUZD.js";import"./chunk-UYB4FCO3.js";import"./chunk-52PBV3KU.js";import{$a as D,$c as w,Db as $,Ia as m,Ja as n,Ka as o,La as P,Mb as H,Nb as N,Pa as f,Qa as _,R as M,S as x,Sa as O,Tb as Q,Ua as h,Ub as b,Wa as C,Yc as G,_a as L,_c as S,ab as I,ad as K,bc as W,bd as J,fa as T,fc as q,ga as c,gb as k,ib as i,jb as B,kb as u,lb as F,ma as p,mb as R,nb as z,ob as A,qa as y,rb as U,tb as j,va as d,wb as V}from"./chunk-KLI6WXR5.js";var Bt=()=>[10,25,50,100];function Ft(e,l){if(e&1&&(n(0,"mat-option",7),i(1),o()),e&2){let t=l.$implicit;m("value",t.id),c(),u(" ",t.name," ")}}function Rt(e,l){e&1&&(n(0,"div",14)(1,"p"),i(2,"Loading photos..."),o()())}function zt(e,l){if(e&1){let t=O();n(0,"div",15)(1,"mat-icon"),i(2,"photo_library"),o(),n(3,"h3"),i(4,"No Photos Found"),o(),n(5,"p"),i(6,"Upload your first photo to get started"),o(),n(7,"button",2),h("click",function(){M(t);let a=C();return x(a.navigateToUpload())}),n(8,"mat-icon"),i(9,"add_photo_alternate"),o(),i(10," Upload Photo "),o()()}}function At(e,l){e&1&&(n(0,"th",29),i(1,"Photo"),o())}function Ut(e,l){if(e&1&&(n(0,"td",30)(1,"div",31),P(2,"img",32),o()()),e&2){let t=l.$implicit,r=C(2);c(2),m("src",r.getPhotoUrl(t),T)("alt",t.title)}}function jt(e,l){e&1&&(n(0,"th",29),i(1,"Title"),o())}function Vt(e,l){if(e&1&&(n(0,"td",30)(1,"div",33)(2,"div",34),i(3),o(),n(4,"div",35),i(5),j(6,"slice"),o()()()),e&2){let t=l.$implicit;c(3),B(t.title),c(2),F("",V(6,3,t.description,0,60),"",t.description.length>60?"...":"")}}function $t(e,l){e&1&&(n(0,"th",29),i(1,"Categories"),o())}function Ht(e,l){if(e&1&&(n(0,"mat-chip"),i(1),o()),e&2){let t=l.$implicit;c(),u(" ",t," ")}}function Nt(e,l){if(e&1&&(n(0,"td",30)(1,"div",36),d(2,Ht,2,1,"mat-chip",37),o()()),e&2){let t=l.$implicit;c(2),m("ngForOf",t.categoryNames)}}function Qt(e,l){e&1&&(n(0,"th",29),i(1,"Base Price"),o())}function Wt(e,l){if(e&1&&(n(0,"td",30),i(1),o()),e&2){let t=l.$implicit,r=C(2);c(),u(" ",r.formatPrice(t.price)," ")}}function qt(e,l){e&1&&(n(0,"th",29),i(1,"Status"),o())}function Gt(e,l){if(e&1&&(n(0,"td",30)(1,"mat-chip"),i(2),o()()),e&2){let t=l.$implicit;c(),k("active-chip",t.isActive)("inactive-chip",!t.isActive),c(),u(" ",t.isActive?"Active":"Inactive"," ")}}function Kt(e,l){e&1&&(n(0,"th",29),i(1,"Actions"),o())}function Jt(e,l){if(e&1){let t=O();n(0,"td",30)(1,"div",38)(2,"button",39),h("click",function(){let a=M(t).$implicit,s=C(2);return x(s.editPhoto(a))}),n(3,"mat-icon"),i(4,"edit"),o()(),n(5,"button",40),h("click",function(){let a=M(t).$implicit,s=C(2);return x(s.deletePhoto(a))}),n(6,"mat-icon"),i(7,"delete"),o()()()()}}function Xt(e,l){e&1&&P(0,"tr",41)}function Yt(e,l){e&1&&P(0,"tr",42)}function Zt(e,l){if(e&1&&(n(0,"div",16)(1,"table",17),f(2,18),d(3,At,2,0,"th",19)(4,Ut,3,2,"td",20),_(),f(5,21),d(6,jt,2,0,"th",19)(7,Vt,7,7,"td",20),_(),f(8,22),d(9,$t,2,0,"th",19)(10,Nt,3,1,"td",20),_(),f(11,23),d(12,Qt,2,0,"th",19)(13,Wt,2,1,"td",20),_(),f(14,24),d(15,qt,2,0,"th",19)(16,Gt,3,5,"td",20),_(),f(17,25),d(18,Kt,2,0,"th",19)(19,Jt,8,0,"td",20),_(),d(20,Xt,1,0,"tr",26)(21,Yt,1,0,"tr",27),o(),P(22,"mat-paginator",28),o()),e&2){let t=C();c(),m("dataSource",t.dataSource),c(19),m("matHeaderRowDef",t.displayedColumns),c(),m("matRowDefColumns",t.displayedColumns),c(),m("pageSizeOptions",U(4,Bt))}}var Le=(()=>{class e{photoService;categoryService;snackBar;dialog;router;cdr;displayedColumns=["thumbnail","title","category","price","status","actions"];dataSource=new xt;categories=[];selectedCategoryId=null;isLoading=!1;paginator;constructor(t,r,a,s,g,kt){this.photoService=t,this.categoryService=r,this.snackBar=a,this.dialog=s,this.router=g,this.cdr=kt}ngOnInit(){this.loadCategories(),this.loadPhotos()}ngAfterViewInit(){this.paginator&&(this.dataSource.paginator=this.paginator)}loadCategories(){this.categoryService.getCategories().subscribe({next:t=>{this.categories=t},error:t=>{console.error("Error loading categories:",t)}})}loadPhotos(){this.isLoading=!0;let t=this.selectedCategoryId||void 0;this.photoService.getPhotos(t).subscribe({next:r=>{this.dataSource.data=r.photos,this.isLoading=!1,this.cdr.detectChanges()},error:r=>{this.snackBar.open("Failed to load photos","Close",{duration:3e3}),console.error("Error loading photos:",r),this.isLoading=!1}})}onCategoryFilterChange(t){this.selectedCategoryId=t,this.loadPhotos()}getPhotoUrl(t){return this.photoService.getPhotoUrl(t.r2Key)}getCategoryName(t){return this.categories.find(a=>a.id===t)?.name||"Unknown"}formatPrice(t){return`$${(t/100).toFixed(2)}`}navigateToUpload(){this.router.navigate(["/admin/photos/upload"])}editPhoto(t){this.router.navigate(["/admin/photos/edit",t.id])}deletePhoto(t){this.dialog.open(te,{data:{photoTitle:t.title}}).afterClosed().subscribe(a=>{a&&(this.isLoading=!0,this.photoService.deletePhoto(t.id).subscribe({next:()=>{this.snackBar.open("Photo deleted successfully","Close",{duration:3e3}),this.loadPhotos()},error:s=>{this.snackBar.open(s.message||"Failed to delete photo","Close",{duration:5e3}),this.isLoading=!1}}))})}refreshList(){this.loadPhotos()}static \u0275fac=function(r){return new(r||e)(p(et),p(X),p(ct),p(Et),p(W),p($))};static \u0275cmp=y({type:e,selectors:[["app-photo-list"]],viewQuery:function(r,a){if(r&1&&L(v,5),r&2){let s;D(s=I())&&(a.paginator=s.first)}},decls:26,vars:6,consts:[[1,"photo-list-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],[1,"filter-card"],[1,"filters"],["appearance","outline"],[3,"valueChange","selectionChange","value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Refresh",3,"click"],[1,"table-card"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading-state"],[1,"empty-state"],[1,"table-container"],["mat-table","",1,"photos-table",3,"dataSource"],["matColumnDef","thumbnail"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","category"],["matColumnDef","price"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"thumbnail"],["loading","lazy",3,"src","alt"],[1,"title-cell"],[1,"photo-title"],[1,"photo-description"],[1,"category-chips"],[4,"ngFor","ngForOf"],[1,"actions"],["mat-icon-button","","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Photo Management"),o(),n(4,"button",2),h("click",function(){return a.navigateToUpload()}),n(5,"mat-icon"),i(6,"add_photo_alternate"),o(),i(7," Upload Photo "),o()(),n(8,"mat-card",3)(9,"mat-card-content")(10,"div",4)(11,"mat-form-field",5)(12,"mat-label"),i(13,"Filter by Category"),o(),n(14,"mat-select",6),A("valueChange",function(g){return z(a.selectedCategoryId,g)||(a.selectedCategoryId=g),g}),h("selectionChange",function(g){return a.onCategoryFilterChange(g.value)}),n(15,"mat-option",7),i(16,"All Categories"),o(),d(17,Ft,2,2,"mat-option",8),o()(),n(18,"button",9),h("click",function(){return a.refreshList()}),n(19,"mat-icon"),i(20,"refresh"),o()()()()(),n(21,"mat-card",10)(22,"mat-card-content"),d(23,Rt,3,0,"div",11)(24,zt,11,0,"div",12)(25,Zt,23,5,"div",13),o()()()),r&2&&(c(14),R("value",a.selectedCategoryId),c(),m("value",null),c(2),m("ngForOf",a.categories),c(6),m("ngIf",a.isLoading),c(),m("ngIf",!a.isLoading&&a.dataSource.data.length===0),c(),m("ngIf",!a.isLoading&&a.dataSource.data.length>0))},dependencies:[b,H,N,q,tt,Y,Z,Mt,st,pt,ht,gt,dt,Ct,ft,_t,ut,Pt,St,v,w,S,G,J,K,yt,vt,at,it,ot,lt,rt,nt,mt,E,bt,Ot,Q],styles:[".photo-list-container[_ngcontent-%COMP%]{padding:24px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Prata,serif;font-size:32px;color:#616e76;margin:0}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:800;background-color:#e2bf55!important;color:#616e76!important}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.filter-card[_ngcontent-%COMP%]{margin-bottom:24px}.filter-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}.filter-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.filter-card[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;max-width:300px;font-family:Barlow,sans-serif}.table-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.loading-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:18px;color:#999}.empty-state[_ngcontent-%COMP%]{padding:80px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#ddd;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Prata,serif;font-size:24px;color:#616e76;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:16px;color:#999;margin-bottom:24px}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:800;background-color:#e2bf55!important;color:#616e76!important}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.photos-table[_ngcontent-%COMP%]{width:100%;font-family:Barlow,sans-serif}.photos-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:800;color:#616e76;background:#f5f5f5}.photos-table[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:80px;height:60px;overflow:hidden;border-radius:4px}.photos-table[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;margin:3px}.photos-table[_ngcontent-%COMP%]   .title-cell[_ngcontent-%COMP%]   .photo-title[_ngcontent-%COMP%]{font-weight:600;color:#616e76;margin-bottom:4px}.photos-table[_ngcontent-%COMP%]   .title-cell[_ngcontent-%COMP%]   .photo-description[_ngcontent-%COMP%]{font-size:12px;color:#999}.photos-table[_ngcontent-%COMP%]   .category-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.photos-table[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:12px}.photos-table[_ngcontent-%COMP%]   mat-chip.active-chip[_ngcontent-%COMP%]{background:#4caf50!important;color:#fff!important}.photos-table[_ngcontent-%COMP%]   mat-chip.inactive-chip[_ngcontent-%COMP%]{background:#999!important;color:#fff!important}.photos-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:4px}.photos-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}mat-paginator[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;font-family:Barlow,sans-serif}@media(max-width:768px){.photo-list-container[_ngcontent-%COMP%]{padding:16px}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.filters[_ngcontent-%COMP%]{flex-direction:column}.filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{max-width:100%}.photos-table[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:60px;height:45px}.photos-table[_ngcontent-%COMP%]   .photo-description[_ngcontent-%COMP%]{display:none}}"]})}return e})(),te=(()=>{class e{data;constructor(t){this.data=t}static \u0275fac=function(r){return new(r||e)(p(wt))};static \u0275cmp=y({type:e,selectors:[["confirm-delete-dialog"]],decls:12,vars:3,consts:[["mat-dialog-title",""],["align","end"],["mat-button","",3,"mat-dialog-close"],["mat-raised-button","","color","warn",3,"mat-dialog-close"]],template:function(r,a){r&1&&(n(0,"h2",0),i(1,"Confirm Delete"),o(),n(2,"mat-dialog-content")(3,"p"),i(4),o(),n(5,"p"),i(6,"This action cannot be undone."),o()(),n(7,"mat-dialog-actions",1)(8,"button",2),i(9,"Cancel"),o(),n(10,"button",3),i(11,"Delete"),o()()),r&2&&(c(4),u('Are you sure you want to delete "',a.data.photoTitle,'"?'),c(4),m("mat-dialog-close",!1),c(2),m("mat-dialog-close",!0))},dependencies:[b,E,Tt,Lt,It,Dt,w,S],styles:["h2[_ngcontent-%COMP%]{font-family:Prata,serif;color:#616e76}p[_ngcontent-%COMP%]{font-family:Barlow,sans-serif}button[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:800}"]})}return e})();export{te as ConfirmDeleteDialog,Le as PhotoListComponent};
