import{a}from"./chunk-5GM4WQFN.js";import{$b as u,N as s,Q as l,r as d}from"./chunk-Z7QZQF3E.js";var h=(()=>{class c{http;constructor(i){this.http=i}getPhotos(i,r=1,t=20){let p=`${a.apiUrl}/photos?page=${r}&limit=${t}`;return i&&(p+=`&categoryId=${i}`),this.http.get(p).pipe(d(o=>{if(o.success&&o.data)return{photos:(o.data.photos||[]).map(e=>({id:e.id,title:e.title,description:e.description,categoryIds:e.categoryIds||[],categoryNames:e.categoryNames||[],categorySlugs:e.categorySlugs||[],r2Key:e.r2_key||e.r2Key,fileSize:e.file_size||e.fileSize,mimeType:e.mime_type||e.mimeType,price:e.price,isActive:e.is_active!==void 0?e.is_active:e.isActive,uploadedBy:e.uploaded_by||e.uploadedBy,createdAt:e.created_at||e.createdAt,updatedAt:e.updated_at||e.updatedAt})),pagination:o.data.pagination||{page:1,limit:20,total:0,totalPages:0}};throw new Error("Failed to fetch photos")}))}getPhotoById(i){return this.http.get(`${a.apiUrl}/photos/${i}`).pipe(d(r=>{if(r.success&&r.data?.photo){let t=r.data.photo;return{id:t.id,title:t.title,description:t.description,categoryIds:t.categoryIds||[],categoryNames:t.categoryNames||[],categorySlugs:t.categorySlugs||[],r2Key:t.r2_key||t.r2Key,fileSize:t.file_size||t.fileSize,mimeType:t.mime_type||t.mimeType,price:t.price,isActive:t.is_active!==void 0?t.is_active:t.isActive,uploadedBy:t.uploaded_by||t.uploadedBy,createdAt:t.created_at||t.createdAt,updatedAt:t.updated_at||t.updatedAt}}throw new Error("Failed to fetch photo")}))}getProducts(){return this.http.get(`${a.apiUrl}/products/pricing`).pipe(d(i=>{if(i.success)return i.data.productTypes;throw new Error("Failed to fetch products")}))}updatePhoto(i,r){return this.http.put(`${a.apiUrl}/photos/${i}`,r).pipe(d(t=>{if(t.success)return t.data.photo;throw new Error("Failed to update photo")}))}deletePhoto(i){return this.http.delete(`${a.apiUrl}/photos/${i}`).pipe(d(r=>{if(!r.success)throw new Error("Failed to delete photo")}))}getPhotoUrl(i){return`${a.apiUrl}/photos/image/${i}`}static \u0275fac=function(r){return new(r||c)(l(u))};static \u0275prov=s({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();export{h as a};
