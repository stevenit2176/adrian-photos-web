import{a as U,b as j}from"./chunk-2ID4XIQB.js";import{d as tt,e as et}from"./chunk-K2GLQ4GK.js";import{a as X,b as Z}from"./chunk-JEGDFQ3A.js";import{a as Q}from"./chunk-2DB5WL3Y.js";import{a as z,b as T,d as A,e as D,h as G}from"./chunk-Z7H67QOJ.js";import{a as F,b as I,c as B,d as L,f as q,h as N}from"./chunk-PDGJ2ZUN.js";import{a as k}from"./chunk-GDRR5EC4.js";import"./chunk-RYSAEJIT.js";import"./chunk-4TETIUZD.js";import{d as R,f as u,h as V,i as H,m as W,o as Y,p as $,t as J,v as K}from"./chunk-UYB4FCO3.js";import"./chunk-52PBV3KU.js";import{$b as v,$c as y,Ba as h,Ca as M,Ea as C,Ia as d,Ja as e,Ka as r,La as s,Ua as g,Ub as b,Yc as w,_c as x,ad as O,bc as _,bd as E,cc as S,ga as o,ib as i,jb as c,ma as l,qa as f,sb as P}from"./chunk-KLI6WXR5.js";var nt=n=>({returnUrl:n});function ot(n,it){n&1&&s(0,"mat-spinner",10)}function at(n,it){n&1&&i(0," Sign In ")}var Et=(()=>{class n{fb;authService;router;route;snackBar;loginForm;loading=!1;hidePassword=!0;returnUrl="/";constructor(a,m,t,p,rt){this.fb=a,this.authService=m,this.router=t,this.route=p,this.snackBar=rt,this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",u.required]})}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/",this.authService.isAuthenticatedSync()&&this.router.navigate([this.returnUrl])}onSubmit(){if(this.loginForm.invalid)return;this.loading=!0;let{email:a,password:m}=this.loginForm.value;this.authService.login({email:a,password:m}).subscribe({next:t=>{this.snackBar.open(`Welcome back, ${t.firstName||t.email}!`,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),t.role==="admin"?this.router.navigate(["/admin"]):this.router.navigate([this.returnUrl])},error:t=>{this.loading=!1,this.snackBar.open(t.message||"Login failed","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}getEmailError(){let a=this.loginForm.get("email");return a?.hasError("required")?"Email is required":a?.hasError("email")?"Please enter a valid email":""}getPasswordError(){return this.loginForm.get("password")?.hasError("required")?"Password is required":""}static \u0275fac=function(m){return new(m||n)(l(J),l(k),l(_),l(v),l(tt))};static \u0275cmp=f({type:n,selectors:[["app-login"]],decls:36,vars:11,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","you@example.com","autocomplete","email"],["matPrefix",""],["matInput","","formControlName","password","placeholder","Your password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],["diameter","20"],[1,"register-link"],["routerLink","/register",3,"queryParams"]],template:function(m,t){m&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Sign In"),r(),e(5,"mat-card-subtitle"),i(6,"Welcome back to Adrian Photos"),r()(),e(7,"mat-card-content")(8,"form",2),g("ngSubmit",function(){return t.onSubmit()}),e(9,"mat-form-field",3)(10,"mat-label"),i(11,"Email"),r(),s(12,"input",4),e(13,"mat-icon",5),i(14,"email"),r(),e(15,"mat-error"),i(16),r()(),e(17,"mat-form-field",3)(18,"mat-label"),i(19,"Password"),r(),s(20,"input",6),e(21,"mat-icon",5),i(22,"lock"),r(),e(23,"button",7),g("click",function(){return t.hidePassword=!t.hidePassword}),e(24,"mat-icon"),i(25),r()(),e(26,"mat-error"),i(27),r()(),e(28,"div",8)(29,"button",9),M(30,ot,1,0,"mat-spinner",10)(31,at,1,0),r()()(),e(32,"div",11),i(33," Don't have an account? "),e(34,"a",12),i(35," Sign up "),r()()()()()),m&2&&(o(8),d("formGroup",t.loginForm),o(8),c(t.getEmailError()),o(4),d("type",t.hidePassword?"password":"text"),o(3),h("aria-label","Hide password"),o(2),c(t.hidePassword?"visibility_off":"visibility"),o(2),c(t.getPasswordError()),o(2),d("disabled",t.loginForm.invalid||t.loading),o(),C(t.loading?30:31),o(4),d("queryParams",P(9,nt,t.returnUrl)))},dependencies:[b,K,W,R,V,H,$,Y,S,N,F,B,q,L,I,Q,G,z,T,A,D,Z,X,y,x,w,j,U,E,O,et],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 64px);padding:2rem 1rem;background:linear-gradient(135deg,#f5f7fa,#e8eef3)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:2rem;box-shadow:0 8px 24px #505a6126}mat-card-header[_ngcontent-%COMP%]{margin-bottom:2rem}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Prata,serif;font-size:2rem;font-weight:400;margin-bottom:.5rem;color:#616e76}mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:1rem;opacity:.7;color:#616e76}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.full-width[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-direction:column;gap:1rem}.login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-family:Barlow,sans-serif;font-size:1rem;font-weight:800;color:#fff;background-color:#616e76!important}.login-button[_ngcontent-%COMP%]:hover{background-color:#505a61!important}.login-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.register-link[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;text-align:center;margin-top:2rem;padding-top:1.5rem;border-top:1px solid rgba(80,90,97,.2)}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#616e76;text-decoration:none;font-weight:600}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e2bf55;text-decoration:underline}@media(max-width:600px){.login-container[_ngcontent-%COMP%]{padding:1rem .5rem}.login-card[_ngcontent-%COMP%]{padding:1.5rem}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]})}return n})();export{Et as LoginComponent};
