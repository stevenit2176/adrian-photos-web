import{a as st}from"./chunk-LBO3KDKK.js";import{a as W}from"./chunk-HGQFANWW.js";import"./chunk-ZAQJCETW.js";import{a as K,b as ot,c as at,d as dt,e as lt}from"./chunk-7PHK2QXC.js";import{a as rt,b as ct}from"./chunk-H2VOUVUC.js";import{a as it}from"./chunk-7QFPHNID.js";import"./chunk-CK746EC2.js";import"./chunk-UPORW54Q.js";import{a as Q,h as J}from"./chunk-32I4E6WU.js";import{a as N,b as j,c as L,d as U,e as R,f as G,h as H}from"./chunk-YDBDHCRP.js";import{c as X,f as Y,i as Z,k as $,n as tt,o as et,q as nt}from"./chunk-5F2ZABTR.js";import"./chunk-26HCTWOP.js";import{$c as F,Ia as l,Ja as i,Ka as n,La as b,Mb as w,Nb as I,R as m,S as g,Sa as x,Tb as z,Ua as h,Wa as d,Xc as D,Zc as V,_b as k,_c as q,ac as E,ad as A,bc as T,ec as B,fa as O,ga as a,ib as r,jb as f,kb as v,lb as S,ma as u,mb as C,nb as P,ob as M,qa as y,va as _}from"./chunk-KPKDHJM6.js";function mt(e,s){if(e&1){let t=x();i(0,"div",5)(1,"mat-icon"),r(2,"error"),n(),i(3,"h2"),r(4),n(),i(5,"button",6),h("click",function(){m(t);let o=d(2);return g(o.goBack())}),r(6," Back to Gallery "),n()()}if(e&2){let t=d(2);a(4),f(t.error)}}function gt(e,s){if(e&1&&(i(0,"mat-option",25),r(1),n()),e&2){let t=s.$implicit;l("value",t),a(),v(" ",t.name," ")}}function _t(e,s){if(e&1&&(i(0,"mat-option",25),r(1),n()),e&2){let t=s.$implicit,c=d(4);l("value",t),a(),S(" ",t.name," - ",c.formatPrice(t.basePrice)," ")}}function ft(e,s){if(e&1){let t=x();i(0,"mat-form-field",16)(1,"mat-label"),r(2,"Size"),n(),i(3,"mat-select",26),M("ngModelChange",function(o){m(t);let p=d(3);return P(p.selectedSize,o)||(p.selectedSize=o),g(o)}),_(4,_t,2,3,"mat-option",18),n()()}if(e&2){let t=d(3);a(3),C("ngModel",t.selectedSize),a(),l("ngForOf",t.selectedProduct.sizes)}}function ut(e,s){if(e&1&&(i(0,"div",31)(1,"span"),r(2),n(),i(3,"span",29),r(4),n()()),e&2){let t=d(4);a(2),v("Total (",t.quantity," items):"),a(2),f(t.formatPrice(t.selectedSize.basePrice*t.quantity))}}function ht(e,s){if(e&1&&(i(0,"div",27)(1,"div",28)(2,"span"),r(3,"Price:"),n(),i(4,"span",29),r(5),n()(),_(6,ut,5,2,"div",30),n()),e&2){let t=d(3);a(5),f(t.formatPrice(t.selectedSize.basePrice)),a(),l("ngIf",t.quantity>1)}}function xt(e,s){if(e&1){let t=x();i(0,"div",7)(1,"button",8),h("click",function(){m(t);let o=d(2);return g(o.goBack())}),i(2,"mat-icon"),r(3,"arrow_back"),n()(),i(4,"div",9)(5,"div",10),b(6,"img",11),n(),i(7,"div",12)(8,"mat-card",13)(9,"mat-card-header")(10,"mat-card-title"),r(11),n(),i(12,"mat-card-subtitle"),r(13),n()(),i(14,"mat-card-content")(15,"p",14),r(16),n(),i(17,"div",15)(18,"h3"),r(19,"Select Product & Size"),n(),i(20,"mat-form-field",16)(21,"mat-label"),r(22,"Product Type"),n(),i(23,"mat-select",17),M("ngModelChange",function(o){m(t);let p=d(2);return P(p.selectedProduct,o)||(p.selectedProduct=o),g(o)}),h("selectionChange",function(){m(t);let o=d(2);return g(o.onProductChange())}),_(24,gt,2,2,"mat-option",18),n()(),_(25,ft,5,2,"mat-form-field",19),i(26,"mat-form-field",20)(27,"mat-label"),r(28,"Quantity"),n(),i(29,"input",21),M("ngModelChange",function(o){m(t);let p=d(2);return P(p.quantity,o)||(p.quantity=o),g(o)}),n()(),_(30,ht,7,2,"div",22),n()(),i(31,"mat-card-actions")(32,"button",23),h("click",function(){m(t);let o=d(2);return g(o.addToCart())}),i(33,"mat-icon"),r(34,"add_shopping_cart"),n(),r(35," Add to Cart "),n(),i(36,"button",24),r(37," Continue Shopping "),n()()()()()()}if(e&2){let t=d(2);a(6),l("src",t.getPhotoUrl(),O)("alt",t.photo.title),a(5),f(t.photo.title),a(2),f(t.photo.categoryName),a(3),f(t.photo.description),a(7),C("ngModel",t.selectedProduct),a(),l("ngForOf",t.products),a(),l("ngIf",t.selectedProduct),a(4),C("ngModel",t.quantity),a(),l("ngIf",t.selectedSize),a(2),l("disabled",!t.canAddToCart())}}function Ct(e,s){if(e&1&&(i(0,"div",2),_(1,mt,7,1,"div",3)(2,xt,38,11,"div",4),n()),e&2){let t=d();a(),l("ngIf",t.error),a(),l("ngIf",t.photo&&!t.error)}}function Pt(e,s){e&1&&(i(0,"div",32)(1,"mat-icon",33),r(2,"refresh"),n(),i(3,"p"),r(4,"Loading photo..."),n()())}var Ut=(()=>{class e{route;router;photoService;cartService;snackBar;photo=null;products=[];selectedProduct=null;selectedSize=null;quantity=1;loading=!0;error=null;constructor(t,c,o,p,pt){this.route=t,this.router=c,this.photoService=o,this.cartService=p,this.snackBar=pt}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?(this.loadPhoto(t),this.loadProducts()):(this.error="Photo ID not found",this.loading=!1)}loadPhoto(t){this.photoService.getPhotoById(t).subscribe({next:c=>{this.photo=c,this.loading=!1},error:c=>{this.error="Failed to load photo",this.loading=!1,console.error("Error loading photo:",c)}})}loadProducts(){this.photoService.getProducts().subscribe({next:t=>{this.products=t,t.length>0&&(this.selectedProduct=t[0],t[0].sizes&&t[0].sizes.length>0&&(this.selectedSize=t[0].sizes[0]))},error:t=>{console.error("Error loading products:",t)}})}onProductChange(){this.selectedProduct&&this.selectedProduct.sizes.length>0?this.selectedSize=this.selectedProduct.sizes[0]:this.selectedSize=null}getPhotoUrl(){return this.photo?this.photoService.getPhotoUrl(this.photo.r2Key):""}formatPrice(t){return`$${(t/100).toFixed(2)}`}canAddToCart(){return!!(this.photo&&this.selectedProduct&&this.selectedSize&&this.quantity>0)}addToCart(){!this.canAddToCart()||!this.photo||!this.selectedProduct||!this.selectedSize||(this.cartService.addItem({photoId:this.photo.id,photoTitle:this.photo.title,photoThumbnail:this.getPhotoUrl(),productTypeId:this.selectedProduct.id,productTypeName:this.selectedProduct.name,productSizeId:this.selectedSize.id,productSizeName:this.selectedSize.name,unitPrice:this.selectedSize.basePrice,quantity:this.quantity}),this.snackBar.open("Added to cart!","View Cart",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}).onAction().subscribe(()=>{this.router.navigate(["/cart"])}))}goBack(){this.router.navigate(["/gallery"])}static \u0275fac=function(c){return new(c||e)(u(k),u(E),u(st),u(W),u(dt))};static \u0275cmp=y({type:e,selectors:[["app-photo-detail"]],decls:2,vars:2,consts:[["class","photo-detail-container",4,"ngIf"],["class","loading",4,"ngIf"],[1,"photo-detail-container"],["class","error-message",4,"ngIf"],["class","photo-detail",4,"ngIf"],[1,"error-message"],["mat-raised-button","","color","primary",3,"click"],[1,"photo-detail"],["mat-icon-button","",1,"back-button",3,"click"],[1,"photo-content"],[1,"photo-image-section"],[1,"photo-image",3,"src","alt"],[1,"photo-info-section"],[1,"info-card"],[1,"description"],[1,"product-selection"],["appearance","outline",1,"full-width"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","class","full-width",4,"ngIf"],["appearance","outline",1,"quantity-field"],["matInput","","type","number","min","1","max","99",3,"ngModelChange","ngModel"],["class","price-summary",4,"ngIf"],["mat-raised-button","","color","primary",1,"add-to-cart-btn",3,"click","disabled"],["mat-button","","routerLink","/gallery"],[3,"value"],[3,"ngModelChange","ngModel"],[1,"price-summary"],[1,"price-row"],[1,"price"],["class","price-row total",4,"ngIf"],[1,"price-row","total"],[1,"loading"],[1,"spinner"]],template:function(c,o){c&1&&_(0,Ct,3,2,"div",0)(1,Pt,5,0,"div",1),c&2&&(l("ngIf",!o.loading),a(),l("ngIf",o.loading))},dependencies:[z,w,I,B,T,nt,X,$,Y,et,tt,Z,H,N,R,L,G,U,j,q,V,D,A,F,at,J,Q,ot,K,it,ct,rt,lt],styles:[".photo-detail-container[_ngcontent-%COMP%]{min-height:calc(100vh - 64px);background:#f5f7fa;padding:40px 20px}.back-button[_ngcontent-%COMP%]{position:fixed;top:80px;left:20px;background:#fff;box-shadow:0 2px 8px #0000001a;z-index:10}.back-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#616e76}.error-message[_ngcontent-%COMP%]{text-align:center;padding:80px 20px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#f44336;margin-bottom:20px}.error-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Prata,serif;color:#616e76;margin:0 0 24px}.photo-detail[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.photo-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 500px;gap:40px;align-items:start}.photo-image-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 4px 16px #0000001a}.photo-image-section[_ngcontent-%COMP%]   .photo-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.photo-info-section[_ngcontent-%COMP%]{position:sticky;top:80px}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:24px}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Prata,serif;font-size:32px;color:#616e76;margin-bottom:8px}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:16px;color:#999;text-transform:uppercase;letter-spacing:1px}.info-card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:16px;line-height:1.6;color:#666;margin-bottom:32px}.info-card[_ngcontent-%COMP%]   .product-selection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Prata,serif;font-size:20px;color:#616e76;margin:0 0 20px}.info-card[_ngcontent-%COMP%]   .product-selection[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.info-card[_ngcontent-%COMP%]   .product-selection[_ngcontent-%COMP%]   .quantity-field[_ngcontent-%COMP%]{width:120px}.info-card[_ngcontent-%COMP%]   .product-selection[_ngcontent-%COMP%]   .quantity-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:600}.info-card[_ngcontent-%COMP%]   .price-summary[_ngcontent-%COMP%]{margin:24px 0;padding:20px;background:#f5f7fa;border-radius:8px}.info-card[_ngcontent-%COMP%]   .price-summary[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-family:Barlow,sans-serif;font-size:16px;color:#666;margin-bottom:12px}.info-card[_ngcontent-%COMP%]   .price-summary[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.info-card[_ngcontent-%COMP%]   .price-summary[_ngcontent-%COMP%]   .price-row.total[_ngcontent-%COMP%]{font-size:20px;font-weight:800;color:#616e76;padding-top:12px;border-top:2px solid #e0e0e0;margin-top:12px}.info-card[_ngcontent-%COMP%]   .price-summary[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700;color:#616e76}.info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:800;font-size:16px;padding:12px 24px;background-color:#e2bf55!important;color:#616e76!important}.info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]:disabled{background-color:#ddd!important;color:#999!important}.info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-weight:600}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:60px;width:60px;height:60px;color:#616e76;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Barlow,sans-serif;font-size:16px;color:#999;margin-top:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media(max-width:1024px){.photo-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.photo-info-section[_ngcontent-%COMP%]{position:static}}@media(max-width:768px){.photo-detail-container[_ngcontent-%COMP%]{padding:20px 10px}.back-button[_ngcontent-%COMP%]{top:70px;left:10px}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:24px}}"]})}return e})();export{Ut as PhotoDetailComponent};
