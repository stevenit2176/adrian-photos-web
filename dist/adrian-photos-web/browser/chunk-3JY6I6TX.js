import{a as U,b as u,c as j,d as z,e as T,f as A,g as D,h as G,i as R,j as V,k as H,m as W,n as Y,o as $,p as J,q as K,r as Q,s as X,t as Z,u as tt,v as et}from"./chunk-7IGLLE4X.js";import{a as b,c as _,d as S,r as k}from"./chunk-PKP6UM3U.js";import{a as F,b as I,c as B,d as L,e as q,g as N}from"./chunk-6YEK4LDB.js";import{$a as g,Ca as f,Na as h,Oa as M,Ob as v,Qa as C,Ra as d,Sa as e,Ta as r,Ua as s,pb as i,qa as o,qb as c,tb as P,tc as x,vc as w,wa as l,wc as y,xc as E,yc as O}from"./chunk-GY42VP45.js";var nt=n=>({returnUrl:n});function ot(n,it){n&1&&s(0,"mat-spinner",10)}function at(n,it){n&1&&i(0," Sign In ")}var Ot=(()=>{class n{fb;authService;router;route;snackBar;loginForm;loading=!1;hidePassword=!0;returnUrl="/";constructor(a,m,t,p,rt){this.fb=a,this.authService=m,this.router=t,this.route=p,this.snackBar=rt,this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",u.required]})}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/",this.authService.isAuthenticatedSync()&&this.router.navigate([this.returnUrl])}onSubmit(){if(this.loginForm.invalid)return;this.loading=!0;let{email:a,password:m}=this.loginForm.value;this.authService.login({email:a,password:m}).subscribe({next:t=>{this.snackBar.open(`Welcome back, ${t.firstName||t.email}!`,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),this.router.navigate([this.returnUrl])},error:t=>{this.loading=!1,this.snackBar.open(t.message||"Login failed","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}getEmailError(){let a=this.loginForm.get("email");return a?.hasError("required")?"Email is required":a?.hasError("email")?"Please enter a valid email":""}getPasswordError(){return this.loginForm.get("password")?.hasError("required")?"Password is required":""}static \u0275fac=function(m){return new(m||n)(l(G),l(k),l(_),l(b),l(tt))};static \u0275cmp=f({type:n,selectors:[["app-login"]],decls:36,vars:11,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","you@example.com","autocomplete","email"],["matPrefix",""],["matInput","","formControlName","password","placeholder","Your password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],["diameter","20"],[1,"register-link"],["routerLink","/register",3,"queryParams"]],template:function(m,t){m&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Sign In"),r(),e(5,"mat-card-subtitle"),i(6,"Welcome back to Adrian Photos"),r()(),e(7,"mat-card-content")(8,"form",2),g("ngSubmit",function(){return t.onSubmit()}),e(9,"mat-form-field",3)(10,"mat-label"),i(11,"Email"),r(),s(12,"input",4),e(13,"mat-icon",5),i(14,"email"),r(),e(15,"mat-error"),i(16),r()(),e(17,"mat-form-field",3)(18,"mat-label"),i(19,"Password"),r(),s(20,"input",6),e(21,"mat-icon",5),i(22,"lock"),r(),e(23,"button",7),g("click",function(){return t.hidePassword=!t.hidePassword}),e(24,"mat-icon"),i(25),r()(),e(26,"mat-error"),i(27),r()(),e(28,"div",8)(29,"button",9),M(30,ot,1,0,"mat-spinner",10)(31,at,1,0),r()()(),e(32,"div",11),i(33," Don't have an account? "),e(34,"a",12),i(35," Sign up "),r()()()()()),m&2&&(o(8),d("formGroup",t.loginForm),o(8),c(t.getEmailError()),o(4),d("type",t.hidePassword?"password":"text"),o(3),h("aria-label","Hide password"),o(2),c(t.hidePassword?"visibility_off":"visibility"),o(2),c(t.getPasswordError()),o(2),d("disabled",t.loginForm.invalid||t.loading),o(),C(t.loading?30:31),o(4),d("queryParams",P(9,nt,t.returnUrl)))},dependencies:[v,R,T,U,j,z,D,A,S,N,F,B,q,L,I,J,$,V,H,W,Y,Q,K,y,w,x,Z,X,O,E,et],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 64px);padding:2rem 1rem;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:2rem}mat-card-header[_ngcontent-%COMP%]{margin-bottom:2rem}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin-bottom:.5rem}mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.7}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.full-width[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-direction:column;gap:1rem}.login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:1rem;font-weight:600}.login-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;padding-top:1.5rem;border-top:1px solid rgba(0,0,0,.12)}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color, #616e76);text-decoration:none;font-weight:600}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media(max-width:600px){.login-container[_ngcontent-%COMP%]{padding:1rem .5rem}.login-card[_ngcontent-%COMP%]{padding:1.5rem}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]})}return n})();export{Ot as LoginComponent};
